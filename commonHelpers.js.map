{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = {\n    key: '43018302-cdfd5f670eb7813c2554bba0c',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const response = await axios.get(BASE_URL, { params });\n  return response.data;\n}\n","import { galleryList } from '../main';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// =================================\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\n// ==============================================\n\nfunction templateGallery(obj) {\n  return `<li class=\"gallery-item\">\n            <a class=\"image-link\" href=\"${obj.largeImageURL}\">\n            <img loading=\"lazy\" class=\"image\" src=\"${obj.webformatURL}\" alt=\"${obj.tags}\"/>\n            <ul class=\"list-container\">\n            <li class=\"item-container\"><p class=\"title\">Likes</p><p class=\"value\">${obj.likes}</p></li>\n            <li class=\"item-container\"><p class=\"title\">Views</p><p class=\"value\">${obj.views}</p></li>\n            <li class=\"item-container\"><p class=\"title\">Comments</p><p class=\"value\">${obj.comments}</p></li>\n            <li class=\"item-container\"><p class=\"title\">Downloads</p><p class=\"value\">${obj.downloads}</p></li>\n            </ul>\n            </a>\n            </li>`;\n}\n\nfunction templateGalleries(arr) {\n  return arr.map(templateGallery).join('');\n}\n\nexport function renderGallery(arr) {\n  const markup = templateGalleries(arr);\n\n  galleryList.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n","import { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ===========================================\nconst searchForm = document.querySelector('.search-form');\nexport const galleryList = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.js-btn-load');\nconst preloader = document.querySelector('.loader');\n// ===========================================\n\nlet input;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\n// =============================================\n\nsearchForm.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  input = e.target.elements.query.value.trim();\n  galleryList.innerHTML = '';\n  currentPage = 1;\n  if (!input) {\n    iziToast.show({\n      message: 'Please complete the field!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    showLoader();\n    const data = await getImages(input, currentPage);\n    if (data.totalHits === 0) {\n      hideLoader();\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n        position: 'topRight',\n      });\n      hideLoadMore();\n      searchForm.reset();\n      return;\n    } else {\n      maxPage = Math.ceil(data.totalHits / pageSize);\n      renderGallery(data.hits);\n      checkButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Sorry, an error occurred while loading. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  searchForm.reset();\n});\n\nbtnLoadMore.addEventListener('click', async e => {\n  try {\n    showLoader();\n    currentPage += 1;\n    const data = await getImages(input, currentPage);\n    renderGallery(data.hits);\n  } catch (error) {\n    iziToast.error({\n      message: 'Sorry, an error occurred while loading. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  }\n\n  scroll();\n  checkButton();\n  hideLoader();\n});\n// ===========================================\n\nfunction checkButton() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction showLoadMore() {\n  btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadMore() {\n  btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n  preloader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  preloader.classList.add('hidden');\n}\n\nfunction scroll() {\n  const height = galleryList.firstChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImages","query","currentPage","BASE_URL","params","axios","lightbox","SimpleLightbox","templateGallery","obj","templateGalleries","arr","renderGallery","markup","galleryList","searchForm","btnLoadMore","preloader","input","maxPage","pageSize","iziToast","showLoader","data","hideLoader","hideLoadMore","checkButton","scroll","showLoadMore","height"],"mappings":"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"}